Subject: Re: Why don't we make mmap MAP_SHARED with /dev/zero possible?
References: <199910260158.JAA00043@chpc.ict.ac.cn>
Mime-Version: 1.0 (generated by tm-edit 7.108)
Content-Type: text/plain; charset=US-ASCII
From: Christoph Rohland <hans-christoph.rohland@sap.com>
Date: 26 Oct 1999 09:35:45 +0200
In-Reply-To: fxzhang's message of "Tue, 26 Oct 1999 9:57:48 +0800"
Message-ID: <qwwg0yymv5a.fsf@sap.com>
Sender: owner-linux-mm@kvack.org
Return-Path: <owner-linux-mm@kvack.org>
To: fxzhang@chpc.ict.ac.cn
Cc: "linux-mm@kvack.org" <linux-mm@kvack.org>
List-ID: <linux-mm.kvack.org>

fxzhang <fxzhang@chpc.ict.ac.cn> writes:

> and find this:
>  /usr/src/linux/drivers/char/mem.c static int mmap_zero(struct file *
> file, struct vm_area_struct * vma) {
>         if (vma->vm_flags & VM_SHARED)
>                 return -EINVAL;
> 
> I don't understand why people don't implement it.Yes,in the source,I
> find something like "the shared case is complex",Could someone tell me
> what's the difficulty?As it is a driver,I think it should not be too
> much to concern.At least I know in Solaris this works.
>    I want to implement it but know I am not competent now,I am just
> beginning digging it:).

Yes I would like to see it also, but at least in 2.0 days it was
really difficult/impossible.

>    Is there any good way to share memory between process at page
> granularity?That is,I can share individual pages between them? Threads
> maybe a subtitue,but there are many things that I don't want to share.

Using SYSV shm with key IPC_PRIVATE gives you the same behaviour.

Greetings
          Christoph
--
To unsubscribe, send a message with 'unsubscribe linux-mm' in
the body to majordomo@kvack.org.  For more info on Linux MM,
see: http://humbolt.geo.uu.nl/Linux-MM/
