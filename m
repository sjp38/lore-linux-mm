Message-ID: <48A4C542.5000308@sciatl.com>
Date: Thu, 14 Aug 2008 16:52:34 -0700
From: C Michael Sundius <Michael.sundius@sciatl.com>
MIME-Version: 1.0
Subject: Re: sparsemem support for mips with highmem
References: <48A4AC39.7020707@sciatl.com> <1218753308.23641.56.camel@nimitz>
In-Reply-To: <1218753308.23641.56.camel@nimitz>
Content-Type: multipart/mixed;
 boundary="------------080207030904070300090705"
Sender: owner-linux-mm@kvack.org
Return-Path: <owner-linux-mm@kvack.org>
To: Dave Hansen <dave@linux.vnet.ibm.com>
Cc: linux-mm@kvack.org, linux-mips@linux-mips.org, jfraser@broadcom.com, Andy Whitcroft <apw@shadowen.org>
List-ID: <linux-mm.kvack.org>

This is a multi-part message in MIME format.
--------------080207030904070300090705
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

fixed patch



--------------080207030904070300090705
Content-Type: text/plain;
 name="mypatchfile.1"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="mypatchfile.1"

ZGlmZiAtLWdpdCBhL0RvY3VtZW50YXRpb24vc3BhcnNlbWVtLnR4dCBiL0RvY3VtZW50YXRp
b24vc3BhcnNlbWVtLnR4dApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwLi42
YWVhMGQxCi0tLSAvZGV2L251bGwKKysrIGIvRG9jdW1lbnRhdGlvbi9zcGFyc2VtZW0udHh0
CkBAIC0wLDAgKzEsOTMgQEAKK1NwYXJzZW1lbSBkaXZpZGVzIHVwIHBoeXNpY2FsIG1lbW9y
eSBpbiB5b3VyIHN5c3RlbSBpbnRvIE4gc2VjdGlvbiBvZiBNCitieXRlcy4gUGFnZSBkZXNj
cmlwdG9ycyBhcmUgY3JlYXRlZCBmb3Igb25seSB0aG9zZSBzZWN0aW9ucyB0aGF0CithY3R1
YWxseSBleGlzdCAoYXMgZmFyIGFzIHRoZSBzcGFyc2VtZW0gY29kZSBpcyBjb25jZXJuZWQp
LiBUaGlzIGFsbG93cworZm9yIGhvbGVzIGluIHRoZSBwaHlzaWNhbCBtZW1vcnkgd2l0aG91
dCBoYXZpbmcgdG8gd2FzdGUgc3BhY2UgYnkKK2NyZWF0aW5nIHBhZ2UgZGlzY3JpcHRvcnMg
Zm9yIHRob3NlIHBhZ2VzIHRoYXQgZG8gbm90IGV4aXN0LgorV2hlbiBwYWdlX3RvX3Bmbigp
IG9yIHBmbl90b19wYWdlKCkgYXJlIGNhbGxlZCB0aGVyZSBpcyBhIGJpdCBvZiBvdmVyaGVh
ZCB0bworbG9vayB1cCB0aGUgcHJvcGVyIG1lbW9yeSBzZWN0aW9uIHRvIGdldCB0byB0aGUg
ZGVzY3JpcHRvcnMsIGJ1dCB0aGlzCitpcyBzbWFsbCBjb21wYXJlZCB0byB0aGUgbWVtb3J5
IHlvdSBhcmUgbGlrZWx5IHRvIHNhdmUuIFNvLCBpdCdzIG5vdCB0aGUKK2RlZmF1bHQsIGJ1
dCBzaG91bGQgYmUgdXNlZCBpZiB5b3UgaGF2ZSBiaWcgaG9sZXMgaW4gcGh5c2ljYWwgbWVt
b3J5LgorCitOb3RlIHRoYXQgZGlzY29udGlndW91cyBtZW1vcnkgaXMgbW9yZSBjbG9zZWx5
IHJlbGF0ZWQgdG8gTlVNQSBtYWNoaW5lcworYW5kIGlmIHlvdSBhcmUgYSBzaW5nbGUgQ1BV
IHN5c3RlbSB1c2Ugc3BhcnNlbWVtIGFuZCBub3QgZGlzY29udGlnLiAKK0l0J3MgbXVjaCBz
aW1wbGVyLiAKKworMSkgQ0FMTCBNRU1PUllfUFJFU0VOVCgpCitPbmNlIHRoZSBib290bWVt
IGFsbG9jYXRvciBpcyB1cCBhbmQgcnVubmluZywgeW91IHNob3VsZCBjYWxsIHRoZQorc3Bh
cnNlbWVtIGZ1bmN0aW9uICJtZW1vcnlfcHJlc2VudChub2RlLCBwZm5fc3RhcnQsIHBmbl9l
bmQpIiBmb3IgZWFjaAorYmxvY2sgb2YgbWVtb3J5IHRoYXQgZXhpc3RzIG9uIHlvdXIgc3lz
dGVtLgorCisyKSBERVRFUk1JTkUgQU5EIFNFVCBUSEUgU0laRSBPRiBTRUNUSU9OUyBBTkQg
UEhZU01FTQorVGhlIHNpemUgb2YgTiBhbmQgTSBhYm92ZSBkZXBlbmQgdXBvbiB5b3VyIGFy
Y2hpdGVjdHVyZQorYW5kIHlvdXIgcGxhdGZvcm0gYW5kIGFyZSBzcGVjaWZpZWQgaW4gdGhl
IGZpbGU6CisKKyAgICAgIGluY2x1ZGUvYXNtLTx5b3VyX2FyY2g+L3NwYXJzZW1lbS5oCisK
K2FuZCB5b3Ugc2hvdWxkIGNyZWF0ZSB0aGUgZm9sbG93aW5nIGxpbmVzIHNpbWlsYXIgdG8g
YmVsb3c6IAorCisJI2lmZGVmIENPTkZJR19ZT1VSX1BMQVRGT1JNCisJICNkZWZpbmUgU0VD
VElPTl9TSVpFX0JJVFMgICAgICAgMjcJLyogMTI4IE1pQiAqLworCSNlbmRpZgorCSNkZWZp
bmUgTUFYX1BIWVNNRU1fQklUUyAgICAgICAgMzEJLyogMiBHaUIgICAqLworCitpZiB0aGV5
IGRvbid0IGFscmVhZHkgZXhpc3QsIHdoZXJlOiAKKworICogU0VDVElPTl9TSVpFX0JJVFMg
ICAgICAgICAgICAyXk06IGhvdyBiaWcgZWFjaCBzZWN0aW9uIHdpbGwgYmUKKyAqIE1BWF9Q
SFlTTUVNX0JJVFMgICAgICAgICAgICAgMl5OOiBob3cgbXVjaCBtZW1vcnkgd2UgY2FuIGhh
dmUgaW4gdGhhdAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNl
CisKKzMpIElOSVRJQUxJWkUgU1BBUlNFIE1FTU9SWQorWW91IHNob3VsZCBtYWtlIHN1cmUg
dGhhdCB5b3UgaW5pdGlhbGl6ZSB0aGUgc3BhcnNlIG1lbW9yeSBjb2RlIGJ5IGNhbGxpbmcg
CisKKwlib290bWVtX2luaXQoKTsKKyAgKwlzcGFyc2VfaW5pdCgpOworCXBhZ2luZ19pbml0
KCk7CisKK2p1c3QgYmVmb3JlIHlvdSBjYWxsIHBhZ2luZ19pbml0KCkgYW5kIGFmdGVyIHRo
ZSBib290bWVtX2FsbG9jYXRvciBpcwordHVybmVkIG9uIGluIHlvdXIgc2V0dXBfYXJjaCgp
IGNvZGUuICAKKworNCkgRU5BQkxFIFNQQVJTRU1FTSBJTiBLQ09ORklHCitBZGQgYSBsaW5l
IGxpa2UgdGhpczoKKworCXNlbGVjdCBBUkNIX1NQQVJTRU1FTV9FTkFCTEUKKworaW50byB0
aGUgY29uZmlnIGZvciB5b3VyIHBsYXRmb3JtIGluIGFyY2gvPHlvdXJfYXJjaD4vS2NvbmZp
Zy4gVGhpcyB3aWxsCitlbnN1cmUgdGhhdCB0dXJuaW5nIG9uIHNwYXJzZW1lbSBpcyBlbmFi
bGVkIGZvciB5b3VyIHBsYXRmb3JtLiAKKworNSkgQ09ORklHCitSdW4gbWFrZSBtZW51Y29u
ZmlnIG9yIG1ha2UgZ2NvbmZpZywgYXMgeW91IGxpa2UsIGFuZCB0dXJuIG9uIHRoZSBzcGFy
c2VtZW0KK21lbW9yeSBtb2RlbCB1bmRlciB0aGUgIktlcm5lbCBUeXBlIiAtLT4gIk1lbW9y
eSBNb2RlbCIgYW5kIHRoZW4gYnVpbGQgeW91cgora2VybmVsLgorCisKKzYpIEdvdGNoYXMK
KworT25lIHRyaWNrIHRoYXQgSSBlbmNvdW50ZXJlZCB3aGVuIEkgd2FzIHR1cm5pbmcgdGhp
cyBvbiBmb3IgTUlQUyB3YXMgdGhhdCB0aGVyZQord2FzIHNvbWUgY29kZSBpbiBtZW1faW5p
dCgpIHRoYXQgc2V0IHRoZSAicmVzZXJ2ZWQiIGZsYWcgZm9yIHBhZ2VzIHRoYXQgd2VyZSBu
b3QKK3ZhbGlkIFJBTS4gVGhpcyBjYXVzZWQgbXkga2VybmVsIHRvIGNyYXNoIHdoZW4gSSBl
bmFibGVkIHNwYXJzZW1lbSBzaW5jZSB0aG9zZQorcGFnZXMgKGFuZCBwYWdlIGRlc2NyaXB0
b3JzKSBkaWRuJ3QgYWN0dWFsbHkgZXhpc3QuIEkgY2hhbmdlZCBteSBjb2RlIGJ5IGFkZGlu
ZworbGluZXMgbGlrZSBiZWxvdzoKKworCisJZm9yICh0bXAgPSBoaWdoc3RhcnRfcGZuOyB0
bXAgPCBoaWdoZW5kX3BmbjsgdG1wKyspIHsKKwkJc3RydWN0IHBhZ2UgKnBhZ2UgPSBwZm5f
dG9fcGFnZSh0bXApOworCisgICArCQlpZiAoIXBmbl92YWxpZCh0bXApKQorICAgKwkJCWNv
bnRpbnVlOworICAgKworCQlpZiAoIXBhZ2VfaXNfcmFtKHRtcCkpIHsKKwkJCVNldFBhZ2VS
ZXNlcnZlZChwYWdlKTsKKwkJCWNvbnRpbnVlOworCQl9CisJCUNsZWFyUGFnZVJlc2VydmVk
KHBhZ2UpOworCQlpbml0X3BhZ2VfY291bnQocGFnZSk7CisJCV9fZnJlZV9wYWdlKHBhZ2Up
OworCQlwaHlzbWVtX3JlY29yZChQRk5fUEhZUyh0bXApLCBQQUdFX1NJWkUsIHBoeXNtZW1f
aGlnaG1lbSk7CisJCXRvdGFsaGlnaF9wYWdlcysrOworCX0KKworCitPbmNlIEkgZ290IHRo
YXQgc3RyYWlnaHQsIGl0IHdvcmtlZCEhISEgSSBzYXZlZCAxME1pQiBvZiBtZW1vcnkuICAK
KworCisKZGlmZiAtLWdpdCBhL2FyY2gvbWlwcy9rZXJuZWwvc2V0dXAuYyBiL2FyY2gvbWlw
cy9rZXJuZWwvc2V0dXAuYwppbmRleCBjNmEwNjNiLi41YjFhZjg3IDEwMDY0NAotLS0gYS9h
cmNoL21pcHMva2VybmVsL3NldHVwLmMKKysrIGIvYXJjaC9taXBzL2tlcm5lbC9zZXR1cC5j
CkBAIC00MDgsNyArNDA4LDYgQEAgc3RhdGljIHZvaWQgX19pbml0IGJvb3RtZW1faW5pdCh2
b2lkKQogCiAJCS8qIFJlZ2lzdGVyIGxvd21lbSByYW5nZXMgKi8KIAkJZnJlZV9ib290bWVt
KFBGTl9QSFlTKHN0YXJ0KSwgc2l6ZSA8PCBQQUdFX1NISUZUKTsKLQkJbWVtb3J5X3ByZXNl
bnQoMCwgc3RhcnQsIGVuZCk7CiAJfQogCiAJLyoKQEAgLTQyMCw2ICs0MTksMjMgQEAgc3Rh
dGljIHZvaWQgX19pbml0IGJvb3RtZW1faW5pdCh2b2lkKQogCSAqIFJlc2VydmUgaW5pdHJk
IG1lbW9yeSBpZiBuZWVkZWQuCiAJICovCiAJZmluYWxpemVfaW5pdHJkKCk7CisKKwkvKiBj
YWxsIG1lbW9yeSBwcmVzZW50IGZvciBhbGwgdGhlIHJhbSAqLworCWZvciAoaSA9IDA7IGkg
PCBib290X21lbV9tYXAubnJfbWFwOyBpKyspIHsKKwkJdW5zaWduZWQgbG9uZyBzdGFydCwg
ZW5kOworCisJCS8qCisJCSAqIG1lbW9yeSBwcmVzZW50IG9ubHkgdXNhYmxlIG1lbW9yeS4K
KwkJICovCisJCWlmIChib290X21lbV9tYXAubWFwW2ldLnR5cGUgIT0gQk9PVF9NRU1fUkFN
KQorCQkJY29udGludWU7CisKKwkJc3RhcnQgPSBQRk5fVVAoYm9vdF9tZW1fbWFwLm1hcFtp
XS5hZGRyKTsKKwkJZW5kICAgPSBQRk5fRE9XTihib290X21lbV9tYXAubWFwW2ldLmFkZHIK
KwkJCQkgICAgKyBib290X21lbV9tYXAubWFwW2ldLnNpemUpOworCisJCW1lbW9yeV9wcmVz
ZW50KDAsIHN0YXJ0LCBlbmQpOworCX0KIH0KIAogI2VuZGlmCS8qIENPTkZJR19TR0lfSVAy
NyAqLwpkaWZmIC0tZ2l0IGEvYXJjaC9taXBzL21tL2luaXQuYyBiL2FyY2gvbWlwcy9tbS9p
bml0LmMKaW5kZXggMTM3YzE0Yi4uMzE0OTZhMSAxMDA2NDQKLS0tIGEvYXJjaC9taXBzL21t
L2luaXQuYworKysgYi9hcmNoL21pcHMvbW0vaW5pdC5jCkBAIC00MTQsNiArNDE0LDkgQEAg
dm9pZCBfX2luaXQgbWVtX2luaXQodm9pZCkKIAlmb3IgKHRtcCA9IGhpZ2hzdGFydF9wZm47
IHRtcCA8IGhpZ2hlbmRfcGZuOyB0bXArKykgewogCQlzdHJ1Y3QgcGFnZSAqcGFnZSA9IHBm
bl90b19wYWdlKHRtcCk7CiAKKwkJaWYgKCFwZm5fdmFsaWQodG1wKSkKKwkJCWNvbnRpbnVl
OworCiAJCWlmICghcGFnZV9pc19yYW0odG1wKSkgewogCQkJU2V0UGFnZVJlc2VydmVkKHBh
Z2UpOwogCQkJY29udGludWU7CmRpZmYgLS1naXQgYS9pbmNsdWRlL2FzbS1taXBzL3NwYXJz
ZW1lbS5oIGIvaW5jbHVkZS9hc20tbWlwcy9zcGFyc2VtZW0uaAppbmRleCA3OTVhYzZjLi45
ZmFhZjU5IDEwMDY0NAotLS0gYS9pbmNsdWRlL2FzbS1taXBzL3NwYXJzZW1lbS5oCisrKyBi
L2luY2x1ZGUvYXNtLW1pcHMvc3BhcnNlbWVtLmgKQEAgLTYsOCArNiwxNCBAQAogICogU0VD
VElPTl9TSVpFX0JJVFMJCTJeTjogaG93IGJpZyBlYWNoIHNlY3Rpb24gd2lsbCBiZQogICog
TUFYX1BIWVNNRU1fQklUUwkJMl5OOiBob3cgbXVjaCBtZW1vcnkgd2UgY2FuIGhhdmUgaW4g
dGhhdCBzcGFjZQogICovCisKKyNpZm5kZWYgQ09ORklHXzY0QklUCisjZGVmaW5lIFNFQ1RJ
T05fU0laRV9CSVRTICAgICAgIDI3CS8qIDEyOCBNaUIgKi8KKyNkZWZpbmUgTUFYX1BIWVNN
RU1fQklUUyAgICAgICAgMzEJLyogMiBHaUIgICAqLworI2Vsc2UKICNkZWZpbmUgU0VDVElP
Tl9TSVpFX0JJVFMgICAgICAgMjgKICNkZWZpbmUgTUFYX1BIWVNNRU1fQklUUyAgICAgICAg
MzUKKyNlbmRpZgogCiAjZW5kaWYgLyogQ09ORklHX1NQQVJTRU1FTSAqLwogI2VuZGlmIC8q
IF9NSVBTX1NQQVJTRU1FTV9IICovCg==
--------------080207030904070300090705--

--
To unsubscribe, send a message with 'unsubscribe linux-mm' in
the body to majordomo@kvack.org.  For more info on Linux MM,
see: http://www.linux-mm.org/ .
Don't email: <a href=mailto:"dont@kvack.org"> email@kvack.org </a>
