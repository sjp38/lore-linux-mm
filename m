From: Michael Ellerman <mpe@ellerman.id.au>
Subject: Re: [kernel-hardening] Re: [PATCH 9/9] mm: SLUB hardened usercopy
 support
Date: Sat, 09 Jul 2016 15:58:20 +1000
Message-ID: <20087.1197427206$1468043981@news.gmane.org>
References: <577f7e55.4668420a.84f17.5cb9SMTPIN_ADDED_MISSING@mx.google.com>
 <alpine.DEB.2.20.1607080844370.3379@east.gentwo.org>
 <CAGXu5jKE=h32tHVLsDeaPN1GfC+BB3YbFvC+5TE5TK1oR-xU3A@mail.gmail.com>
 <alpine.DEB.2.20.1607081119170.6192@east.gentwo.org>
 <CAGXu5j+UdkQA+k39GNLe5CwBPVD5ZbRGTCQLqS8VF=kWx+PtsQ@mail.gmail.com>
 <CAGXu5jKxw3RxWNKLX4XVCwJ6x_zA=_RwiU9jLDm2+VRO79G7+w@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Return-path: <linuxppc-dev-bounces+glppd-linuxppc64-dev=m.gmane.org@lists.ozlabs.org>
In-Reply-To: <CAGXu5jKxw3RxWNKLX4XVCwJ6x_zA=_RwiU9jLDm2+VRO79G7+w@mail.gmail.com>
List-Unsubscribe: <https://lists.ozlabs.org/options/linuxppc-dev>,
 <mailto:linuxppc-dev-request@lists.ozlabs.org?subject=unsubscribe>
List-Archive: <http://lists.ozlabs.org/pipermail/linuxppc-dev/>
List-Post: <mailto:linuxppc-dev@lists.ozlabs.org>
List-Help: <mailto:linuxppc-dev-request@lists.ozlabs.org?subject=help>
List-Subscribe: <https://lists.ozlabs.org/listinfo/linuxppc-dev>,
 <mailto:linuxppc-dev-request@lists.ozlabs.org?subject=subscribe>
Errors-To: linuxppc-dev-bounces+glppd-linuxppc64-dev=m.gmane.org@lists.ozlabs.org
Sender: "Linuxppc-dev"
 <linuxppc-dev-bounces+glppd-linuxppc64-dev=m.gmane.org@lists.ozlabs.org>
To: Kees Cook <keescook@chromium.org>, Christoph Lameter <cl@linux.com>
Cc: Jan Kara <jack@suse.cz>, "kernel-hardening@lists.openwall.com" <kernel-hardening@lists.openwall.com>, Catalin Marinas <catalin.marinas@arm.com>, Will Deacon <will.deacon@arm.com>, Linux-MM <linux-mm@kvack.org>, sparclinux <sparclinux@vger.kernel.org>, linux-ia64@vger.kernel.org, Andrea Arcangeli <aarcange@redhat.com>, "x86@kernel.org" <x86@kernel.org>, Russell King <linux@armlinux.org.uk>, "linux-arm-kernel@lists.infradead.org" <linux-arm-kernel@lists.infradead.org>, David Rientjes <rientjes@google.com>, PaX Team <pageexec@freemail.hu>, Borislav Petkov <bp@suse.de>, Mathias Krause <minipli@googlemail.com>, linux-arch <linux-arch@vger.kernel.org>, Rik van Riel <riel@redhat.com>, Brad Spengler <spender@grsecurity.net>, Andy Lutomirski <luto@kernel.org>, Andrew Morton <akpm@linux-foundation.org>, Dmitry Vyukov <dvyukov@google.com>, Laura Abbott <labbott@fedoraproject.org>T
List-Id: linux-mm.kvack.org

S2VlcyBDb29rIDxrZWVzY29va0BjaHJvbWl1bS5vcmc+IHdyaXRlczoKCj4gT24gRnJpLCBKdWwg
OCwgMjAxNiBhdCAxOjQxIFBNLCBLZWVzIENvb2sgPGtlZXNjb29rQGNocm9taXVtLm9yZz4gd3Jv
dGU6Cj4+IFNvLCBhcyBmb3VuZCBhbHJlYWR5LCB0aGUgcG9zaXRpb24gaW4gdGhlIHVzZXJjb3B5
IGNoZWNrIG5lZWRzIHRvIGJlCj4+IGJ1bXBlZCBkb3duIGJ5IHJlZF9sZWZ0X3BhZCwgd2hpY2gg
aXMgd2hhdCBNaWNoYWVsJ3MgZml4IGRvZXMsIHNvIEknbGwKPj4gaW5jbHVkZSBpdCBpbiB0aGUg
bmV4dCB2ZXJzaW9uLgo+Cj4gQWN0dWFsbHksIGFmdGVyIHNvbWUgb2ZmbGluZSBjaGF0cywgSSB0
aGluayB0aGlzIGlzIGJldHRlciwgc2luY2UgaXQKPiBtYWtlcyBzdXJlIHRoZSBwdHIgZG9lc24n
dCBlbmQgdXAgc29tZXdoZXJlIHdlaXJkIGJlZm9yZSB3ZSBzdGFydCB0aGUKPiBjYWxjdWxhdGlv
bnMuIFRoaXMgbGVhdmVzIHRoZSBwb2ludGVyIGFzLWlzLCBidXQgZXhwbGljaXRseSBoYW5kbGVz
Cj4gdGhlIHJlZHpvbmUgb24gdGhlIG9mZnNldCBpbnN0ZWFkLCB3aXRoIG5vIHdyYXBwaW5nLCBl
dGM6Cj4KPiAgICAgICAgIC8qIEZpbmQgb2Zmc2V0IHdpdGhpbiBvYmplY3QuICovCj4gICAgICAg
ICBvZmZzZXQgPSAocHRyIC0gcGFnZV9hZGRyZXNzKHBhZ2UpKSAlIHMtPnNpemU7Cj4KPiArICAg
ICAgIC8qIEFkanVzdCBmb3IgcmVkem9uZSBhbmQgcmVqZWN0IGlmIHdpdGhpbiB0aGUgcmVkem9u
ZS4gKi8KPiArICAgICAgIGlmIChzLT5mbGFncyAmIFNMQUJfUkVEX1pPTkUpIHsKPiArICAgICAg
ICAgICAgICAgaWYgKG9mZnNldCA8IHMtPnJlZF9sZWZ0X3BhZCkKPiArICAgICAgICAgICAgICAg
ICAgICAgICByZXR1cm4gcy0+bmFtZTsKPiArICAgICAgICAgICAgICAgb2Zmc2V0IC09IHMtPnJl
ZF9sZWZ0X3BhZDsKPiArICAgICAgIH0KPiArCj4gICAgICAgICAvKiBBbGxvdyBhZGRyZXNzIHJh
bmdlIGZhbGxpbmcgZW50aXJlbHkgd2l0aGluIG9iamVjdCBzaXplLiAqLwo+ICAgICAgICAgaWYg
KG9mZnNldCA8PSBzLT5vYmplY3Rfc2l6ZSAmJiBuIDw9IHMtPm9iamVjdF9zaXplIC0gb2Zmc2V0
KQo+ICAgICAgICAgICAgICAgICByZXR1cm4gTlVMTDsKClRoYXQgZml4ZXMgdGhlIGNhc2UgZm9y
IG1lIGluIGtzdHJuZHVwKCksIHdoaWNoIGFsbG93cyB0aGUgc3lzdGVtIHRvIGJvb3QuCgpJIHRo
ZW4gZ2V0IHR3byBoaXRzLCB3aGljaCBtYXkgb3IgbWF5IG5vdCBiZSB2YWxpZDoKClsgICAgMi4z
MDk1NTZdIHVzZXJjb3B5OiBrZXJuZWwgbWVtb3J5IG92ZXJ3cml0ZSBhdHRlbXB0IGRldGVjdGVk
IHRvIGQwMDAwMDAwMDM1MTAwMjggKGtlcm5mc19ub2RlX2NhY2hlKSAoNjQgYnl0ZXMpClsgICAg
Mi4zMDk5OTVdIENQVTogNyBQSUQ6IDIyNDEgQ29tbTogd2FpdC1mb3Itcm9vdCBOb3QgdGFpbnRl
ZCA0LjcuMC1yYzMtMDAwOTktZzk3ODcyZmM4OWQ0MSAjNjQKWyAgICAyLjMxMDQ4MF0gQ2FsbCBU
cmFjZToKWyAgICAyLjMxMDU1Nl0gW2MwMDAwMDAxZjQ3NzNiZjBdIFtjMDAwMDAwMDAwOWJkYmU4
XSBkdW1wX3N0YWNrKzB4YjAvMHhmMCAodW5yZWxpYWJsZSkKWyAgICAyLjMxMTAxNl0gW2MwMDAw
MDAxZjQ3NzNjMzBdIFtjMDAwMDAwMDAwMjljZjQ0XSBfX2NoZWNrX29iamVjdF9zaXplKzB4NzQv
MHgzMjAKWyAgICAyLjMxMTQ3Ml0gW2MwMDAwMDAxZjQ3NzNjYjBdIFtjMDAwMDAwMDAwMDVkNGQw
XSBjb3B5X2Zyb21fdXNlcisweDYwLzB4ZDQKWyAgICAyLjMxMTg3M10gW2MwMDAwMDAxZjQ3NzNj
ZjBdIFtjMDAwMDAwMDAwOGIzOGY0XSBfX2dldF9maWx0ZXIrMHg3NC8weDE2MApbICAgIDIuMzEy
MjMwXSBbYzAwMDAwMDFmNDc3M2QzMF0gW2MwMDAwMDAwMDA4YjQwOGNdIHNrX2F0dGFjaF9maWx0
ZXIrMHgyYy8weGMwClsgICAgMi4zMTI1OTZdIFtjMDAwMDAwMWY0NzczZDYwXSBbYzAwMDAwMDAw
MDg3MWMzNF0gc29ja19zZXRzb2Nrb3B0KzB4OTU0LzB4YzAwClsgICAgMi4zMTMwMjFdIFtjMDAw
MDAwMWY0NzczZGQwXSBbYzAwMDAwMDAwMDg2YWM0NF0gU3lTX3NldHNvY2tvcHQrMHgxMzQvMHgx
NTAKWyAgICAyLjMxMzM4MF0gW2MwMDAwMDAxZjQ3NzNlMzBdIFtjMDAwMDAwMDAwMDA5MjYwXSBz
eXN0ZW1fY2FsbCsweDM4LzB4MTA4ClsgICAgMi4zMTcwNDVdIHVzZXJjb3B5OiBrZXJuZWwgbWVt
b3J5IG92ZXJ3cml0ZSBhdHRlbXB0IGRldGVjdGVkIHRvIGQwMDAwMDAwMDM1MzAwMjggKGtlcm5m
c19ub2RlX2NhY2hlKSAoNjQgYnl0ZXMpClsgICAgMi4zMTcyOTddIENQVTogMTAgUElEOiAyMjQy
IENvbW06IHdhaXQtZm9yLXJvb3QgTm90IHRhaW50ZWQgNC43LjAtcmMzLTAwMDk5LWc5Nzg3MmZj
ODlkNDEgIzY0ClsgICAgMi4zMTc0NzVdIENhbGwgVHJhY2U6ClsgICAgMi4zMTc1MTFdIFtjMDAw
MDAwMWY0NzFmYmYwXSBbYzAwMDAwMDAwMDliZGJlOF0gZHVtcF9zdGFjaysweGIwLzB4ZjAgKHVu
cmVsaWFibGUpClsgICAgMi4zMTc2ODldIFtjMDAwMDAwMWY0NzFmYzMwXSBbYzAwMDAwMDAwMDI5
Y2Y0NF0gX19jaGVja19vYmplY3Rfc2l6ZSsweDc0LzB4MzIwClsgICAgMi4zMTc4NjFdIFtjMDAw
MDAwMWY0NzFmY2IwXSBbYzAwMDAwMDAwMDA1ZDRkMF0gY29weV9mcm9tX3VzZXIrMHg2MC8weGQ0
ClsgICAgMi4zMTgwMTFdIFtjMDAwMDAwMWY0NzFmY2YwXSBbYzAwMDAwMDAwMDhiMzhmNF0gX19n
ZXRfZmlsdGVyKzB4NzQvMHgxNjAKWyAgICAyLjMxODE2NV0gW2MwMDAwMDAxZjQ3MWZkMzBdIFtj
MDAwMDAwMDAwOGI0MDhjXSBza19hdHRhY2hfZmlsdGVyKzB4MmMvMHhjMApbICAgIDIuMzE4MzEz
XSBbYzAwMDAwMDFmNDcxZmQ2MF0gW2MwMDAwMDAwMDA4NzFjMzRdIHNvY2tfc2V0c29ja29wdCsw
eDk1NC8weGMwMApbICAgIDIuMzE4NDg1XSBbYzAwMDAwMDFmNDcxZmRkMF0gW2MwMDAwMDAwMDA4
NmFjNDRdIFN5U19zZXRzb2Nrb3B0KzB4MTM0LzB4MTUwClsgICAgMi4zMTg2MzJdIFtjMDAwMDAw
MWY0NzFmZTMwXSBbYzAwMDAwMDAwMDAwOTI2MF0gc3lzdGVtX2NhbGwrMHgzOC8weDEwOAoKCldp
dGg6CgojIHpncmVwIFNMVUIgL3Byb2MvY29uZmlnLmd6CkNPTkZJR19TTFVCX0RFQlVHPXkKQ09O
RklHX1NMVUI9eQpDT05GSUdfU0xVQl9DUFVfUEFSVElBTD15CkNPTkZJR19TTFVCX0RFQlVHX09O
PXkKIyBDT05GSUdfU0xVQl9TVEFUUyBpcyBub3Qgc2V0CgpjaGVlcnMKX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KTGludXhwcGMtZGV2IG1haWxpbmcgbGlz
dApMaW51eHBwYy1kZXZAbGlzdHMub3psYWJzLm9yZwpodHRwczovL2xpc3RzLm96bGFicy5vcmcv
bGlzdGluZm8vbGludXhwcGMtZGV2
