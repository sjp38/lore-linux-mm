Return-Path: <owner-linux-mm@kvack.org>
Received: from mail-pd0-f169.google.com (mail-pd0-f169.google.com [209.85.192.169])
	by kanga.kvack.org (Postfix) with ESMTP id F38576B0074
	for <linux-mm@kvack.org>; Thu, 26 Mar 2015 12:24:37 -0400 (EDT)
Received: by pdbop1 with SMTP id op1so67337160pdb.2
        for <linux-mm@kvack.org>; Thu, 26 Mar 2015 09:24:37 -0700 (PDT)
Received: from mail.sfc.wide.ad.jp (shonan.sfc.wide.ad.jp. [2001:200:0:8803::53])
        by mx.google.com with ESMTPS id qm7si8995213pac.163.2015.03.26.09.24.36
        for <linux-mm@kvack.org>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Thu, 26 Mar 2015 09:24:36 -0700 (PDT)
Date: Fri, 27 Mar 2015 01:24:34 +0900
Message-ID: <m2h9t7bubh.wl@wide.ad.jp>
From: Hajime Tazaki<tazaki@wide.ad.jp>
Subject: Re: [RFC PATCH 00/11] an introduction of library operating system for Linux (LibOS)
In-Reply-To: <55133BAF.30301@nod.at>
References: <1427202642-1716-1-git-send-email-tazaki@sfc.wide.ad.jp>
	<551164ED.5000907@nod.at>
	<m2twxacw13.wl@sfc.wide.ad.jp>
	<55117565.6080002@nod.at>
	<m2sicuctb2.wl@sfc.wide.ad.jp>
	<55118277.5070909@nod.at>
	<m2bnjhcevt.wl@sfc.wide.ad.jp>
	<55133BAF.30301@nod.at>
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: owner-linux-mm@kvack.org
List-ID: <linux-mm.kvack.org>
To: richard@nod.at
Cc: linux-arch@vger.kernel.org, arnd@arndb.de, corbet@lwn.net, cl@linux.com, penberg@kernel.org, rientjes@google.com, iamjoonsoo.kim@lge.com, akpm@linux-foundation.org, linux-kernel@vger.kernel.org, linux-doc@vger.kernel.org, netdev@vger.kernel.org, linux-mm@kvack.org, jdike@addtoit.com, rusty@rustcorp.com.au, mathieu.lacage@gmail.com


Hi Richard,

At Wed, 25 Mar 2015 23:50:23 +0100,
Richard Weinberger wrote:
> 
> Hi!
> 
> Am 25.03.2015 um 15:48 schrieb Hajime Tazaki:
> > 
> > At Tue, 24 Mar 2015 16:27:51 +0100,
> > Richard Weinberger wrote:
> >>
> >> I'd say you should try hard to re-use/integrate your work in arch/um.
> >> With um we already have an architecture which targets userspace,
> >> having two needs a very good justification.
> > 
> > in addition to the case of my previous email, libos is not
> > limited to run on user-mode: it is just a library which can
> > be used with various programs. thus it has a potential (not
> > implemented yet) to run on a hypervisor like OSv or MirageOS
> > does for application containment, or run on a bare-metal
> > machine as rumpkernel does. We already have a clear
> > interface for the underlying layer to be able to add such
> > backend.
> > 
> > again, it's not only for user-mode.
> > 
> > mixing all the stuff in a single architecture may not only
> > mislead to users, but also introduce conceptual-disagreements
> > during code sharing of essential parts. 
> > 
> > I don't see any benefits to have a name 'um' with this idea.
> > 
> > # I'm not saying sharing a part of code is bad idea at all, btw.
> 
> After digging into the source I know what you mean and I have the

thank you for your deep review on the source code !

> feeling that "lib" is the wrong name.
> It has not much do to with an architecture.

could you care to elaborate your feeling more explicitly ?

what is an architecture here and what is _not_ an
architecture ? 
is UML an architecture in your sense (probably yes, but why)?

and what is arch/lib missing for an architecture ?

> Apart from that, I really like your idea!

great to hear that ;)

> You don't implement an architecture, you take some part of Linux
> (the networking stack) and create stubs around it to make it work.
> That means that we'd also have to duplicate kernel functions into
> arch/lib to keep it running.

again, the above same questions.

it (arch/lib) is a hardware-independent architecture which
provides necessary features to the remainder of kernel code,
isn't it ?

answers to those questions are really helpful for a feedback
on this RFC patches.

> BTW: It does not build here:
> ---cut---
>   LIB           liblinux-4.0.0-rc5.so

fixed, thanks: though the issue was in the external code
base (i.e., linux-libos-tools). there was a parallel build
(make -jX) problem.

# you may need to git pull at arch/lib/tools to reflect the updates.

thanks.

-- Hajime

--
To unsubscribe, send a message with 'unsubscribe linux-mm' in
the body to majordomo@kvack.org.  For more info on Linux MM,
see: http://www.linux-mm.org/ .
Don't email: <a href=mailto:"dont@kvack.org"> email@kvack.org </a>
