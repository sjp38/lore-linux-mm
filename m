Subject: Re: [PATCH] kanoj-mm21-2.3.23 alow larger sizes to shmget()
References: <199911022156.NAA15762@google.engr.sgi.com>
Mime-Version: 1.0 (generated by tm-edit 7.108)
Content-Type: text/plain; charset=US-ASCII
From: Christoph Rohland <hans-christoph.rohland@sap.com>
Date: 02 Nov 1999 23:09:02 +0100
In-Reply-To: kanoj@google.engr.sgi.com's message of "Tue, 2 Nov 1999 13:56:35 -0800 (PST)"
Message-ID: <qwwvh7kh7gh.fsf@sap.com>
Sender: owner-linux-mm@kvack.org
Return-Path: <owner-linux-mm@kvack.org>
To: Kanoj Sarcar <kanoj@google.engr.sgi.com>
Cc: torvalds@transmeta.com, linux-mm@kvack.org
List-ID: <linux-mm.kvack.org>

kanoj@google.engr.sgi.com (Kanoj Sarcar) writes:

> > > The clean up code is similar to what I posted at
> > > 
> > > 	http://humbolt.geo.uu.nl/lists/linux-mm/1999-06/msg00071.html 
> > > 
> > > previously. Although, I would point out that SHMMAX probably belongs
> > > to the asm/* header file (specially, with the size_t size parameter
> > > to shmget()).
> > 
> > Why should we make it arch dependend if we can tune it at runtime?
> >
> 
> Probably 95% of people who run Linux have no idea what
> /proc/sys/kernel/shmmax is, and end up recompiling the kernel with a
> bumped up SHMMAX, if they find SHMMAX too low for their app. On
> sparc64/alpha and yet to come mips64/ia64, SHMMAX can be pretty
> huge, compared to the ia32 0x2000000. Think out of the box, and you
> will see that keeping SHMMAX asm dependent will work better for most
> people ...

So we should include a comment in shm.h to do it via sysctl. For
bigger machines you have many parameters to tune. So the people have
to get used to sysctl and we will need a frontend to tune them
persistently.

At least that's what I would do. In general I think it is good to keep
the arch dependend part as small as possible. But I have no real
objection for doing it the other way besides this.

        Christoph
--
To unsubscribe, send a message with 'unsubscribe linux-mm' in
the body to majordomo@kvack.org.  For more info on Linux MM,
see: http://humbolt.geo.uu.nl/Linux-MM/
