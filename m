Date: Sat, 30 Jun 2007 05:59:07 -0400
Message-ID: <87d4zdix04.wl%peter@chubb.wattle.id.au>
From: Peter Chubb <peterc@gelato.unsw.edu.au>
In-Reply-To: <4685D9C9.20504@de.ibm.com>
References: <87myynt1m6.wl%peter@chubb.wattle.id.au>
	<468517E1.4050803@goop.org>
	<4685D9C9.20504@de.ibm.com>
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Subject: Re: RFC: multiple address spaces for one process
Sender: owner-linux-mm@kvack.org
Return-Path: <owner-linux-mm@kvack.org>
To: carsteno@de.ibm.com
Cc: Jeremy Fitzhardinge <jeremy@goop.org>, linux-mm@kvack.org, Peter Chubb <peterc@gelato.unsw.edu.au>, virtualization@lists.linux-foundation.org
List-ID: <linux-mm.kvack.org>

In LinuxOnLinux, the guest is just another linux process (or
rather, one per virtual CPU).  So what this patch does is allow such a
garden-variety process to have more than one address space and switch
between them.2

Essentially what I'm doing is treating the standard linux VM as a huge
software-loaded TLB.  When the guest gets a TLB miss, the VMM calls
mmap() to insert the translation.    Without the patch the address
space has to be remapped on every guest context switch.  The patch
adds address-space IDs to make that unnecessary.

What I'm wondering is if there are any *other* uses for this (not just
virtualisation).  I know qemu uses mmap() to create its address
spaces if CONFIG_SOFTMMU is not defined, and could thus benefit.

--
Dr Peter Chubb  http://www.gelato.unsw.edu.au  peterc AT gelato.unsw.edu.au
http://www.ertos.nicta.com.au           ERTOS within National ICT Australia

--
To unsubscribe, send a message with 'unsubscribe linux-mm' in
the body to majordomo@kvack.org.  For more info on Linux MM,
see: http://www.linux-mm.org/ .
Don't email: <a href=mailto:"dont@kvack.org"> email@kvack.org </a>
