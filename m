Return-Path: <owner-linux-mm@kvack.org>
Received: from mail-io0-f199.google.com (mail-io0-f199.google.com [209.85.223.199])
	by kanga.kvack.org (Postfix) with ESMTP id 268F16B0005
	for <linux-mm@kvack.org>; Wed, 13 Jul 2016 10:26:27 -0400 (EDT)
Received: by mail-io0-f199.google.com with SMTP id m101so97337833ioi.0
        for <linux-mm@kvack.org>; Wed, 13 Jul 2016 07:26:27 -0700 (PDT)
Received: from out4434.biz.mail.alibaba.com (out4434.biz.mail.alibaba.com. [47.88.44.34])
        by mx.google.com with ESMTP id y6si922609ota.92.2016.07.13.07.26.25
        for <linux-mm@kvack.org>;
        Wed, 13 Jul 2016 07:26:26 -0700 (PDT)
Date: Wed, 13 Jul 2016 22:26:08 +0800
From: "=?UTF-8?B?6ZmI5Yia?=" <chengang@emindsoft.com.cn>
Reply-To: "=?UTF-8?B?6ZmI5Yia?=" <chengang@emindsoft.com.cn>
Message-ID: <ca2e145f-49fe-4032-aa66-2927f19a86ea.chengang@emindsoft.com.cn>
Subject: =?UTF-8?B?5Zue5aSN77yaW1BBVENIXSBtbTogbWlncmF0ZTogVXNlIGJvb2wgaW5zdGVhZCBvZiBpbnQg?=
  =?UTF-8?B?Zm9yIHRoZSByZXR1cm4gdmFsdWUgb2YgUGFnZU1vdmFibGU=?=
MIME-Version: 1.0
References: <1468079704-5477-1-git-send-email-chengang@emindsoft.com.cn> <20160711002605.GD31817@bbox> <5783F7DE.9020203@emindsoft.com.cn> <20160712074841.GE14586@dhcp22.suse.cz> <57851FC4.4000000@emindsoft.com.cn>,20160713075346.GC28723@dhcp22.suse.cz
In-Reply-To: 20160713075346.GC28723@dhcp22.suse.cz
Content-Type: multipart/alternative;
  boundary="----=ALIBOUNDARY_65200_4fe2a940_57864f80_a33df"
Sender: owner-linux-mm@kvack.org
List-ID: <linux-mm.kvack.org>
To: Michal Hocko <mhocko@kernel.org>
Cc: Minchan Kim <minchan@kernel.org>, akpm <akpm@linux-foundation.org>, vbabka <vbabka@suse.cz>, mgorman <mgorman@techsingularity.net>, "gi-oh.kim" <gi-oh.kim@profitbricks.com>, "iamjoonsoo.kim" <iamjoonsoo.kim@lge.com>, "hillf.zj" <hillf.zj@alibaba-inc.com>, rientjes <rientjes@google.com>, linux-mm <linux-mm@kvack.org>, linux-kernel <linux-kernel@vger.kernel.org>, Chen Gang <gang.chen.5i5j@gmail.com>

------=ALIBOUNDARY_65200_4fe2a940_57864f80_a33df
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: base64

SGVsbG86CkV4Y3VzZSBtZSwgSSBoYXZlIHRvIG92ZXIgdGltZSB3b3JrLCBhbmQgd2lsbCBub3Qg
Z28gYmFjayBob21lIHVudGlsIHRoaXMgd2VlayBlbmQuQW5kIEkgc2hhbGwgcmVwbHkgaW4gdGhp
cyB3ZWVrIGVuZC4KVGhhbmtzLgoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t5Y+R5Lu25Lq677yaTWljaGFsIEhvY2tvIDxt
aG9ja29Aa2VybmVsLm9yZz7lj5HpgIHml7bpl7TvvJoyMDE25bm0N+aciDEz5pelKOaYn+acn+S4
iSkgMTU6NTPmlLbku7bkurrvvJrpmYjliJogPGNoZW5nYW5nQGVtaW5kc29mdC5jb20uY24+5oqE
44CA6YCB77yaTWluY2hhbiBLaW0gPG1pbmNoYW5Aa2VybmVsLm9yZz47IGFrcG0gPGFrcG1AbGlu
dXgtZm91bmRhdGlvbi5vcmc+OyB2YmFia2EgPHZiYWJrYUBzdXNlLmN6PjsgbWdvcm1hbiA8bWdv
cm1hbkB0ZWNoc2luZ3VsYXJpdHkubmV0PjsgZ2ktb2gua2ltIDxnaS1vaC5raW1AcHJvZml0YnJp
Y2tzLmNvbT47IGlhbWpvb25zb28ua2ltIDxpYW1qb29uc29vLmtpbUBsZ2UuY29tPjsgaGlsbGYu
emogPGhpbGxmLnpqQGFsaWJhYmEtaW5jLmNvbT47IHJpZW50amVzIDxyaWVudGplc0Bnb29nbGUu
Y29tPjsgbGludXgtbW0gPGxpbnV4LW1tQGt2YWNrLm9yZz47IGxpbnV4LWtlcm5lbCA8bGludXgt
a2VybmVsQHZnZXIua2VybmVsLm9yZz47IENoZW4gR2FuZyA8Z2FuZy5jaGVuLjVpNWpAZ21haWwu
Y29tPuS4u+OAgOmimO+8mlJlOiBbUEFUQ0hdIG1tOiBtaWdyYXRlOiBVc2UgYm9vbCBpbnN0ZWFk
IG9mIGludCBmb3IgdGhlIHJldHVybiB2YWx1ZSBvZiBQYWdlTW92YWJsZQpPbsKgV2VkwqAxMy0w
Ny0xNsKgMDA6NTA6MTIswqBDaGVuwqBHYW5nwqB3cm90ZToKPsKgCj7CoAo+wqBPbsKgNy8xMi8x
NsKgMTU6NDgswqBNaWNoYWzCoEhvY2tvwqB3cm90ZToKPsKgPsKgT27CoFR1ZcKgMTItMDctMTbC
oDAzOjQ3OjQyLMKgQ2hlbsKgR2FuZ8Kgd3JvdGU6Cj7CoD7CoFsuLi5dCj7CoD4+wqBJbsKgb3Vy
wqBjYXNlLMKgdGhlwqAywqBvdXRwdXTCoHNpemXCoGFyZcKgc2FtZSzCoGJ1dMKgdW5kZXLCoHg4
Nl82NCzCoHRoZcKgaW5zbnPCoGFyZQo+wqA+PsKgZGlmZmVyZW50LsKgQWZ0ZXLCoHVzZXPCoGJv
b2wswqBpdMKgdXNlc8KgcHVzaC9wb3DCoGluc3RlYWTCoG9mwqBicmFuY2gswqBmb3LCoG1lLAo+
wqA+PsKgaXTCoHNob3VsZMKgYmXCoGHCoGxpdHRsZcKgYmV0dGVywqBmb3LCoGNhdGNoaW5nLgo+
wqA+wqAKPsKgPsKgVGhlwqBjb2RlwqBnZW5lcmF0ZWTCoGZvcsKgYm9vbMKgdmVyc2lvbsKgbG9v
a3PCoG11Y2jCoHdvcnNlLsKgTG9va8KgYXTCoHRoZcKgZmFzdAo+wqA+wqBwYXRoLsKgR2NjwqB0
cmllc8KgdG/CoHJldXNlwqB0aGXCoHJldHHCoGZyb23CoHRoZcKgZmFzdMKgcGF0aMKgaW7CoHRo
ZcKgYm9vbMKgY2FzZQo+wqA+wqBhbmTCoHNvwqBpdMKgaGFzwqB0b8KgcHVzaMKgcmJwwqBhbmTC
oHJieMKgb27CoHRoZcKgc3RhY2suCj7CoD7CoAo+wqA+wqBUaGF0wqBiZWluZ8Kgc2FpZCzCoGdj
Y8KgZG9lc24ndMKgc2VlbcKgdG/CoGdlbmVyYXRlwqBhwqBiZXR0ZXLCoGNvZGXCoGZvcsKgYm9v
bMKgc28KPsKgPsKgScKgZG/CoG5vdMKgdGhpbmvCoHRoaXPCoGlzwqByZWFsbHnCoHdvcnRowqBp
dC4KPsKgPgo+wqAKPsKgVGhlwqBjb2RlwqBiZWxvd8KgYWxzb8KgbWVyZ2XCoDPCoHN0YXRlbWVu
dHPCoGludG/CoDHCoHJldHVybsKgc3RhdGVtZW50LMKgYWx0aG91Z2gKPsKgZm9ywqBtZSzCoGl0
wqBpc8KgYcKgbGl0dGxlwqBtb3JlwqByZWFkYWJsZSzCoGl0wqB3aWxswqBnZW5lcmF0ZcKgYcKg
bGl0dGxlwqBiYWTCoGNvZGUuCj7CoFRoYXTCoGlzwqB0aGXCoHJlYXNvbsKgd2h5wqB0aGXCoG91
dHB1dMKgbG9va3PCoGHCoGxpdHRsZcKgYmFkLgo+wqAKPsKgSW7CoG91csKgY2FzZSzCoGZvcsKg
Z2NjwqA2LjAswqB1c2luZ8KgYm9vbMKgaW5zdGVhZMKgb2bCoGludMKgZm9ywqBib29swqBmdW5j
dGlvbgo+wqB3aWxswqBnZXTCoHRoZcKgc2FtZcKgb3V0cHV0wqB1bmRlcsKgeDg2XzY0LgoKSWbC
oHRoZcKgb3V0cHV0wqBpc8Kgc2FtZcKgdGhlbsKgdGhlcmXCoGlzwqBub8KgcmVhc29uwqB0b8Kg
Y2hhbmdlwqBpdC4KCj7CoEluwqBvdXLCoGNhc2UswqBmb3LCoGdjY8KgNC44LMKgdXNpbmfCoGJv
b2zCoGluc3RlYWTCoG9mwqBpbnTCoGZvcsKgYm9vbMKgZnVuY3Rpb24KPsKgd2lsbMKgZ2V0wqBh
wqBsaXR0bGXCoGJldHRlcsKgb3V0cHV0wqB1bmRlcsKgeDg2XzY0LgoKScKgaGFkwqBhwqBkaWZm
ZXJlbnTCoGltcHJlc3Npb27CoGFuZMKgdGhlwqBmYXN0wqBwYXRowqBjb2RlwqBoYWTCoG1vcmUK
aW5zdHJ1Y3Rpb25zLsKgQnV0wqBhbnl3YXkswqBpc8KgdGhlcmXCoHJlYWxsecKgYcKgc3Ryb25n
wqByZWFzb27CoHRvwqBjaGFuZ2UKdGhvc2XCoHJldHVybsKgdmFsdWVzwqBpbsKgdGhlwqBmaXJz
dMKgcGxhY2U/wqBJc24ndMKgdGhhdMKganVzdMKgYcKgcG9pbnRsZXNzwqBjb2RlCmNodXJuPwot
LcKgCk1pY2hhbMKgSG9ja28KU1VTRcKgTGFicwo=
------=ALIBOUNDARY_65200_4fe2a940_57864f80_a33df
Content-Type: text/html; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

<div class=3D"__aliyun_email_body_block"><div  style=3D"clear:both;"><span  st=
yle=3D"font-family:Tahoma,Arial,STHeiti,SimSun;font-size:14.0px;color:#000000;=
">Hello:</span></div><div  style=3D"clear:both;"><span  style=3D"font-family:T=
ahoma,Arial,STHeiti,SimSun;font-size:14.0px;color:#000000;"><br ></span></div>=
<div  style=3D"clear:both;"><span  style=3D"font-family:Tahoma,Arial,STHeiti,S=
imSun;font-size:14.0px;color:#000000;">Excuse me, I have to over time work, an=
d will not go back home until this week end.</span></div><div  style=3D"clear:=
both;"><span  style=3D"font-family:Tahoma,Arial,STHeiti,SimSun;font-size:14.0p=
x;color:#000000;">And I shall reply in this week end.</span></div><div  style=3D=
"clear:both;"><span  style=3D"font-family:Tahoma,Arial,STHeiti,SimSun;font-siz=
e:14.0px;color:#000000;"><br ></span></div><div  style=3D"clear:both;"><span  =
style=3D"font-family:Tahoma,Arial,STHeiti,SimSun;font-size:14.0px;color:#00000=
0;">Thanks.<br ></span></div><div  style=3D"clear:both;"><span  style=3D"font-=
family:Tahoma,Arial,STHeiti,SimSun;font-size:14.0px;color:#000000;"><br ></spa=
n></div><blockquote  style=3D"margin-right:.0px;margin-top:.0px;margin-bottom:=
.0px;"><div  style=3D"clear:both;"><span  style=3D"font-family:Tahoma,Arial,ST=
Heiti,SimSun;font-size:14.0px;color:#000000;">--------------------------------=
----------------------------------</span></div><div  style=3D"clear:both;"><sp=
an  style=3D"font-family:Tahoma,Arial,STHeiti,SimSun;font-size:14.0px;color:#0=
00000;">=E5=8F=91=E4=BB=B6=E4=BA=BA=EF=BC=9AMichal Hocko &lt;mhocko@kernel.org=
&gt;</span></div><div  style=3D"clear:both;"><span  style=3D"font-family:Tahom=
a,Arial,STHeiti,SimSun;font-size:14.0px;color:#000000;">=E5=8F=91=E9=80=81=E6=97=
=B6=E9=97=B4=EF=BC=9A2016=E5=B9=B47=E6=9C=8813=E6=97=A5(=E6=98=9F=E6=9C=9F=E4=B8=
=89) 15:53</span></div><div  style=3D"clear:both;"><span  style=3D"font-family=
:Tahoma,Arial,STHeiti,SimSun;font-size:14.0px;color:#000000;">=E6=94=B6=E4=BB=B6=
=E4=BA=BA=EF=BC=9A=E9=99=88=E5=88=9A &lt;chengang@emindsoft.com.cn&gt;</span><=
/div><div  style=3D"clear:both;"><span  style=3D"font-family:Tahoma,Arial,STHe=
iti,SimSun;font-size:14.0px;color:#000000;">=E6=8A=84=E3=80=80=E9=80=81=EF=BC=9A=
Minchan Kim &lt;minchan@kernel.org&gt;; akpm &lt;akpm@linux-foundation.org&gt;=
; vbabka &lt;vbabka@suse.cz&gt;; mgorman &lt;mgorman@techsingularity.net&gt;; =
gi-oh.kim &lt;gi-oh.kim@profitbricks.com&gt;; iamjoonsoo.kim &lt;iamjoonsoo.ki=
m@lge.com&gt;; hillf.zj &lt;hillf.zj@alibaba-inc.com&gt;; rientjes &lt;rientje=
s@google.com&gt;; linux-mm &lt;linux-mm@kvack.org&gt;; linux-kernel &lt;linux-=
kernel@vger.kernel.org&gt;; Chen Gang &lt;gang.chen.5i5j@gmail.com&gt;</span><=
/div><div  style=3D"clear:both;"><span  style=3D"font-family:Tahoma,Arial,STHe=
iti,SimSun;font-size:14.0px;color:#000000;">=E4=B8=BB=E3=80=80=E9=A2=98=EF=BC=9A=
Re: [PATCH] mm: migrate: Use bool instead of int for the return value of PageM=
ovable</span></div><div  style=3D"clear:both;"><span  style=3D"font-family:Tah=
oma,Arial,STHeiti,SimSun;font-size:14.0px;color:#000000;"><br ></span></div>On=
&nbsp;Wed&nbsp;13-07-16&nbsp;00:50:12,&nbsp;Chen&nbsp;Gang&nbsp;wrote:<br >&gt=
;&nbsp;<br >&gt;&nbsp;<br >&gt;&nbsp;On&nbsp;7/12/16&nbsp;15:48,&nbsp;Michal&n=
bsp;Hocko&nbsp;wrote:<br >&gt;&nbsp;&gt;&nbsp;On&nbsp;Tue&nbsp;12-07-16&nbsp;0=
3:47:42,&nbsp;Chen&nbsp;Gang&nbsp;wrote:<br >&gt;&nbsp;&gt;&nbsp;[...]<br >&gt=
;&nbsp;&gt;&gt;&nbsp;In&nbsp;our&nbsp;case,&nbsp;the&nbsp;2&nbsp;output&nbsp;s=
ize&nbsp;are&nbsp;same,&nbsp;but&nbsp;under&nbsp;x86_64,&nbsp;the&nbsp;insns&n=
bsp;are<br >&gt;&nbsp;&gt;&gt;&nbsp;different.&nbsp;After&nbsp;uses&nbsp;bool,=
&nbsp;it&nbsp;uses&nbsp;push/pop&nbsp;instead&nbsp;of&nbsp;branch,&nbsp;for&nb=
sp;me,<br >&gt;&nbsp;&gt;&gt;&nbsp;it&nbsp;should&nbsp;be&nbsp;a&nbsp;little&n=
bsp;better&nbsp;for&nbsp;catching.<br >&gt;&nbsp;&gt;&nbsp;<br >&gt;&nbsp;&gt;=
&nbsp;The&nbsp;code&nbsp;generated&nbsp;for&nbsp;bool&nbsp;version&nbsp;looks&=
nbsp;much&nbsp;worse.&nbsp;Look&nbsp;at&nbsp;the&nbsp;fast<br >&gt;&nbsp;&gt;&=
nbsp;path.&nbsp;Gcc&nbsp;tries&nbsp;to&nbsp;reuse&nbsp;the&nbsp;retq&nbsp;from=
&nbsp;the&nbsp;fast&nbsp;path&nbsp;in&nbsp;the&nbsp;bool&nbsp;case<br >&gt;&nb=
sp;&gt;&nbsp;and&nbsp;so&nbsp;it&nbsp;has&nbsp;to&nbsp;push&nbsp;rbp&nbsp;and&=
nbsp;rbx&nbsp;on&nbsp;the&nbsp;stack.<br >&gt;&nbsp;&gt;&nbsp;<br >&gt;&nbsp;&=
gt;&nbsp;That&nbsp;being&nbsp;said,&nbsp;gcc&nbsp;doesn't&nbsp;seem&nbsp;to&nb=
sp;generate&nbsp;a&nbsp;better&nbsp;code&nbsp;for&nbsp;bool&nbsp;so<br >&gt;&n=
bsp;&gt;&nbsp;I&nbsp;do&nbsp;not&nbsp;think&nbsp;this&nbsp;is&nbsp;really&nbsp=
;worth&nbsp;it.<br >&gt;&nbsp;&gt;<br >&gt;&nbsp;<br >&gt;&nbsp;The&nbsp;code&=
nbsp;below&nbsp;also&nbsp;merge&nbsp;3&nbsp;statements&nbsp;into&nbsp;1&nbsp;r=
eturn&nbsp;statement,&nbsp;although<br >&gt;&nbsp;for&nbsp;me,&nbsp;it&nbsp;is=
&nbsp;a&nbsp;little&nbsp;more&nbsp;readable,&nbsp;it&nbsp;will&nbsp;generate&n=
bsp;a&nbsp;little&nbsp;bad&nbsp;code.<br >&gt;&nbsp;That&nbsp;is&nbsp;the&nbsp=
;reason&nbsp;why&nbsp;the&nbsp;output&nbsp;looks&nbsp;a&nbsp;little&nbsp;bad.<=
br >&gt;&nbsp;<br >&gt;&nbsp;In&nbsp;our&nbsp;case,&nbsp;for&nbsp;gcc&nbsp;6.0=
,&nbsp;using&nbsp;bool&nbsp;instead&nbsp;of&nbsp;int&nbsp;for&nbsp;bool&nbsp;f=
unction<br >&gt;&nbsp;will&nbsp;get&nbsp;the&nbsp;same&nbsp;output&nbsp;under&=
nbsp;x86_64.<br ><br >If&nbsp;the&nbsp;output&nbsp;is&nbsp;same&nbsp;then&nbsp=
;there&nbsp;is&nbsp;no&nbsp;reason&nbsp;to&nbsp;change&nbsp;it.<br ><br >&gt;&=
nbsp;In&nbsp;our&nbsp;case,&nbsp;for&nbsp;gcc&nbsp;4.8,&nbsp;using&nbsp;bool&n=
bsp;instead&nbsp;of&nbsp;int&nbsp;for&nbsp;bool&nbsp;function<br >&gt;&nbsp;wi=
ll&nbsp;get&nbsp;a&nbsp;little&nbsp;better&nbsp;output&nbsp;under&nbsp;x86_64.=
<br ><br >I&nbsp;had&nbsp;a&nbsp;different&nbsp;impression&nbsp;and&nbsp;the&n=
bsp;fast&nbsp;path&nbsp;code&nbsp;had&nbsp;more<br >instructions.&nbsp;But&nbs=
p;anyway,&nbsp;is&nbsp;there&nbsp;really&nbsp;a&nbsp;strong&nbsp;reason&nbsp;t=
o&nbsp;change<br >those&nbsp;return&nbsp;values&nbsp;in&nbsp;the&nbsp;first&nb=
sp;place?&nbsp;Isn't&nbsp;that&nbsp;just&nbsp;a&nbsp;pointless&nbsp;code<br >c=
hurn?<br >--&nbsp;<br >Michal&nbsp;Hocko<br >SUSE&nbsp;Labs</blockquote><div >=
<br ></div></div>
------=ALIBOUNDARY_65200_4fe2a940_57864f80_a33df--

--
To unsubscribe, send a message with 'unsubscribe linux-mm' in
the body to majordomo@kvack.org.  For more info on Linux MM,
see: http://www.linux-mm.org/ .
Don't email: <a href=mailto:"dont@kvack.org"> email@kvack.org </a>
