Return-Path: <owner-linux-mm@kvack.org>
Received: from mail-pa0-f47.google.com (mail-pa0-f47.google.com [209.85.220.47])
	by kanga.kvack.org (Postfix) with ESMTP id 7ACE36B0032
	for <linux-mm@kvack.org>; Fri, 27 Mar 2015 02:05:21 -0400 (EDT)
Received: by padcy3 with SMTP id cy3so85936530pad.3
        for <linux-mm@kvack.org>; Thu, 26 Mar 2015 23:05:21 -0700 (PDT)
Received: from mail.sfc.wide.ad.jp (shonan.sfc.wide.ad.jp. [2001:200:0:8803::53])
        by mx.google.com with ESMTPS id ci11si1435330pdb.144.2015.03.26.23.05.19
        for <linux-mm@kvack.org>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Thu, 26 Mar 2015 23:05:20 -0700 (PDT)
Date: Fri, 27 Mar 2015 15:05:16 +0900
Message-ID: <m2bnjfasbn.wl@sfc.wide.ad.jp>
From: Hajime Tazaki<tazaki@sfc.wide.ad.jp>
Subject: Re: [RFC PATCH 00/11] an introduction of library operating system for Linux (LibOS)
In-Reply-To: <87iodnqfp1.fsf@rustcorp.com.au>
References: <1427202642-1716-1-git-send-email-tazaki@sfc.wide.ad.jp>
	<551164ED.5000907@nod.at>
	<m2twxacw13.wl@sfc.wide.ad.jp>
	<55117565.6080002@nod.at>
	<m2sicuctb2.wl@sfc.wide.ad.jp>
	<55118277.5070909@nod.at>
	<m2bnjhcevt.wl@sfc.wide.ad.jp>
	<55133BAF.30301@nod.at>
	<m2h9t7bubh.wl@wide.ad.jp>
	<5514560A.7040707@nod.at>
	<87iodnqfp1.fsf@rustcorp.com.au>
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: owner-linux-mm@kvack.org
List-ID: <linux-mm.kvack.org>
To: rusty@rustcorp.com.au
Cc: richard@nod.at, linux-arch@vger.kernel.org, arnd@arndb.de, corbet@lwn.net, cl@linux.com, penberg@kernel.org, rientjes@google.com, iamjoonsoo.kim@lge.com, akpm@linux-foundation.org, linux-kernel@vger.kernel.org, linux-doc@vger.kernel.org, netdev@vger.kernel.org, linux-mm@kvack.org, jdike@addtoit.com, mathieu.lacage@gmail.com


Hi Rusty,

At Fri, 27 Mar 2015 14:01:22 +1030,
Rusty Russell wrote:
> 
> Richard Weinberger <richard@nod.at> writes:
> > This also infers that arch/lib will be broken most of the time as
> > every time the networking stack references a new symbol it
> > has to be duplicated into arch/lib.
> >
> > But this does not mean that your idea is bad, all I want to say that
> > I'm not sure whether arch/lib is the right approach.
> > Maybe Arnd has a better idea.
> 
> Exactly why I look forward to getting this in-tree.  Jeremy Kerr and I
> wrote nfsim back in 2005(!) which stubbed around the netfilter
> infrastructure; with failtest and valgrind it found some nasty bugs.  It
> was too much hassle to maintain out-of-tree though :(

we're aware of (and respected ;)) nfsim, and expanded the
idea with DCE: make test ARCH=lib gives a broad testsuite
for network stack. 

# we also have
  make {test-valgrind, test-fault-injection} ARCH=lib
 but not well tested (of the options themselves) yet.

there are the overview of test facility in my slides (the
link is in my original cover letter email)

> I look forward to a flood of great bugfixes from this work :)

it has not been so much, but the following fix for xfrm
regression was detected by this framework (through jenkins
CI). git bisect is also easy (see tools/testing/libos/bisect.sh).

http://patchwork.ozlabs.org/patch/436351/

thanks for the comment.

-- Hajime

--
To unsubscribe, send a message with 'unsubscribe linux-mm' in
the body to majordomo@kvack.org.  For more info on Linux MM,
see: http://www.linux-mm.org/ .
Don't email: <a href=mailto:"dont@kvack.org"> email@kvack.org </a>
