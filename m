Return-Path: <owner-linux-mm@kvack.org>
Received: from mail-pd0-f182.google.com (mail-pd0-f182.google.com [209.85.192.182])
	by kanga.kvack.org (Postfix) with ESMTP id 7794D6B0038
	for <linux-mm@kvack.org>; Wed, 19 Aug 2015 21:27:43 -0400 (EDT)
Received: by pdob1 with SMTP id b1so7691760pdo.2
        for <linux-mm@kvack.org>; Wed, 19 Aug 2015 18:27:43 -0700 (PDT)
Received: from COL004-OMC1S7.hotmail.com (col004-omc1s7.hotmail.com. [65.55.34.17])
        by mx.google.com with ESMTPS id yr4si4558026pbc.140.2015.08.19.18.27.42
        for <linux-mm@kvack.org>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-SHA bits=128/128);
        Wed, 19 Aug 2015 18:27:42 -0700 (PDT)
Message-ID: <COL130-W42D1358B7EBBCA5F39DA3CB9660@phx.gbl>
From: gchen gchen <xili_gchen_5257@hotmail.com>
Subject: Re: [PATCH] mm: mmap: Simplify the failure return working flow
Date: Thu, 20 Aug 2015 09:27:42 +0800
In-Reply-To: <55D52CDE.8060700@hotmail.com>
References: <55D5275D.7020406@hotmail.com>
 <COL130-W46B6A43FC26795B43939E0B9660@phx.gbl>,<55D52CDE.8060700@hotmail.com>
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
Sender: owner-linux-mm@kvack.org
List-ID: <linux-mm.kvack.org>
To: Andrew Morton <akpm@linux-foundation.org>
Cc: kernel mailing list <linux-kernel@vger.kernel.org>, "Kirill A. Shutemov" <kirill.shutemov@linux.intel.com>, "riel@redhat.com" <riel@redhat.com>, Michal Hocko <mhocko@suse.cz>, "sasha.levin@oracle.com" <sasha.levin@oracle.com>, Linux Memory <linux-mm@kvack.org>

Ck9uIFR1ZSwgMTggQXVnIDIwMTUgMTU6NTc6MDggLTA3MDAgYWtwbUBsaW51eC1mb3VuZGF0aW9u
Lm9yZyB3cm90ZToKPgo+IE9uIFdlZCwgMTkgQXVnIDIwMTUgMDY6Mjc6NTggKzA4MDAgQ2hlbiBH
YW5nCj4gPHhpbGlfZ2NoZW5fNTI1N0Bob3RtYWlsLmNvbT4gd3JvdGU6Cj4KPj4gRnJvbTogQ2hl
biBHYW5nIDx4aWxpX2djaGVuXzUyNTdAaG90bWFpbC5jb20+Cj4KPiBBcyBzZW50LCB0aGlzIHBh
dGNoIGlzIEZyb206eW91QGhvdG1haWwgYW5kIFNpZ25lZC1vZmYtYnk6eW91QGdtYWlsLgo+Cj4g
VGhpcyBpcyBwZWN1bGlhci4gIEknbSBhc3N1bWluZyB0aGF0IGl0IHNob3VsZCBoYXZlIGJlZW4g
RnJvbTp5b3VAZ21haWwgYW5kCj4gSSBoYXZlIG1hZGUgdGhhdCBjaGFuZ2UgdG8gbXkgY29weSBv
ZiB0aGUgcGF0Y2guCj4KPiBZb3UgY2FuIGRvIHRoaXMgeW91cnNlbGYgYnkgcHV0dGluZyBhbiBl
eHBsaWNpdCBGcm9tOiBsaW5lIGF0IHRoZSBzdGFydAo+IG9mIHRoZSBjaGFuZ2Vsb2cuCj4KClll
cywgaXQgaXMgcmVhbGx5IHBlY3VsaWFyLCB0aGUgcmVhc29uIGlzIGdtYWlsIGlzIG5vdCBzdGFi
bGUgaW4gQ2hpbmEuCkkgaGF2ZSB0byBzZW5kIG1haWwgaW4gbXkgaG90bWFpbCBhZGRyZXNzLgoK
QnV0IEkgc3RpbGwgd2FudCB0byB1c2UgbXkgZ21haWwgYXMgU2lnbmVkLW9mZi1ieSwgc2luY2Ug
SSBoYXZlIGFscmVhZHkKdXNlZCBpdCwgYW5kIGFsc28gaXRzIG5hbWUgaXMgYSBsaXR0bGUgZm9y
bWFsIHRoYW4gbXkgaG90bWFpbC4KCldlbGNvbWUgYW55IGlkZWFzLCBzdWdnZXN0aW9ucyBhbmQg
Y29tcGxldGlvbnMgZm9yIGl0IChlLmcuIGlmIGl0IGlzCm5lY2Vzc2FyeSB0byBsZXQgc2VuZCBt
YWlsIGFuZCBTaWduZWQtb2ZmLWJ5IG1haWwgYmUgdGhlIHNhbWUsIEkgc2hhbGwKdHJ5KS4KClsu
Li5dCgo+IFNvLAo+Cj4gLS0tIGEvbW0vbW1hcC5jfm1tLW1tYXAtc2ltcGxpZnktdGhlLWZhaWx1
cmUtcmV0dXJuLXdvcmtpbmctZmxvdy1maXgKPiArKysgYS9tbS9tbWFwLmMKPiBAQCAtMjk1Miw3
ICsyOTUyLDcgQEAgc3RydWN0IHZtX2FyZWFfc3RydWN0ICpjb3B5X3ZtYShzdHJ1Y3Qgdgo+ICAg
ICAgICAgfSBlbHNlIHsKPiAgICAgICAgICAgICAgICAgbmV3X3ZtYSA9IGttZW1fY2FjaGVfYWxs
b2Modm1fYXJlYV9jYWNoZXAsIEdGUF9LRVJORUwpOwo+ICAgICAgICAgICAgICAgICBpZiAoIW5l
d192bWEpCj4gLSAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5VTEw7Cj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgZ290byBvdXQ7Cj4gICAgICAgICAgICAgICAgICpuZXdfdm1hID0gKnZt
YTsKPiAgICAgICAgICAgICAgICAgbmV3X3ZtYS0+dm1fc3RhcnQgPSBhZGRyOwo+ICAgICAgICAg
ICAgICAgICBuZXdfdm1hLT52bV9lbmQgPSBhZGRyICsgbGVuOwo+IEBAIC0yOTcxLDEwICsyOTcx
LDExIEBAIHN0cnVjdCB2bV9hcmVhX3N0cnVjdCAqY29weV92bWEoc3RydWN0IHYKPiAgICAgICAg
IH0KPiAgICAgICAgIHJldHVybiBuZXdfdm1hOwo+Cj4gLSBvdXRfZnJlZV9tZW1wb2w6Cj4gK291
dF9mcmVlX21lbXBvbDoKPiAgICAgICAgIG1wb2xfcHV0KHZtYV9wb2xpY3kobmV3X3ZtYSkpOwo+
IC0gb3V0X2ZyZWVfdm1hOgo+ICtvdXRfZnJlZV92bWE6Cj4gICAgICAgICBrbWVtX2NhY2hlX2Zy
ZWUodm1fYXJlYV9jYWNoZXAsIG5ld192bWEpOwo+ICtvdXQ6Cj4gICAgICAgICByZXR1cm4gTlVM
TDsKPiAgfQo+CgpJdCBpcyBPSyB0byBtZSwgdGhhbmtzLgoKRHVyaW5nIHRoZXNlIGRheXMgKDIt
NCBtb250aHMpLCBJIHNoYWxsIHRyeSB0byBtYWtlIHNvbWUgcGF0Y2hlcyBmb3IKTGludXggbW06
CgogLSBJIGFtIGxlYXJuaW5nIExpbnV4IGtlcm5lbCBtbXUsIHNvIEkgY2FuIHJlLXVzZSBwYXJ0
IG9mIGNvZGUgdG8gdXNlcgogICBtb2RlIChhZGQgc29mdG1tdSB0byBxZW11IGxpbnV4IHVzZXIg
aW4gbXkgd29ya2luZyB0aW1lKS4gVGhlbiBJIGNhbgogICB0cnkgc29tZSBtbSBwYXRjaGVzIHdo
ZW4gSSBhbSByZWFkaW5nIHJlbGF0ZWQgY29kZS4KCiAtIEF0IHByZXNlbnQsIGNyb3NzLWJ1aWxk
aW5nIHZhcmlvdXMgYXJjaHMgd2l0aCBhbGxtb2Rjb25maWcgbG9va3MgT0sKICAgKGhhdmUgbm8g
bWFueSBpc3N1ZXMpLCBzbyBmb3IgbWUsIEkgY2FuIHN0b3AgYW5kIHN0YXJ0IGFub3RoZXIgcGFy
dHMKICAgKGUuZy4gbW11LCBsb29uZ3NvbiBtYWNoaW5lIG9mIG1pcHMgYXJjaCwgLi4uKS4KCldl
bGNvbWUgYW55IGlkZWFzLCBzdWdnZXN0aW9ucyBhbmQgY29tcGxldGlvbnMgZm9yIGl0OgoKIC0g
QXNzdW1lIEkgYW0gbm90IHF1aXRlIGZhbWlsaWFyIHdpdGggbW11IC0tIGluIGhvbmVzdCwgSSBm
ZWVsIEkgYW0KICAgcmVhbGx5IG5vdC4KCiAtIElzIGl0IHBvc3NpYmxlIHRvIGJ1aWxkIHRoZSBy
ZWxhdGVkICdzb2Z0bW11JyBhcyBhIG1vZHVsZSB3aGljaCBjYW4KICAgYmUgdXNlZCBieSBib3Ro
IGtlcm5lbCBtb2RlIGFuZCB1c2VyIG1vZGUgKGlmIHJlYWxseSBpdCBpcywgSSBzaGFsbAogICB0
cnkgdG8gcGVyZm9ybSBpdCAtLSBJIGNhbiBkbyBpdCBpbiBteSB3b3JraW5nIHRpbWUpLgoKIC0g
Li4uCgpUaGFua3MuCi0tCkNoZW4gR2FuZwoKT3Blbiwgc2hhcmUsIGFuZCBhdHRpdHVkZSBsaWtl
IGFpciwgd2F0ZXIsIGFuZCBsaWZlIHdoaWNoIEdvZCBibGVzc2VkCiAJCSAJICAgCQkgIA==

--
To unsubscribe, send a message with 'unsubscribe linux-mm' in
the body to majordomo@kvack.org.  For more info on Linux MM,
see: http://www.linux-mm.org/ .
Don't email: <a href=mailto:"dont@kvack.org"> email@kvack.org </a>
