Return-Path: <owner-linux-mm@kvack.org>
Received: from mail143.messagelabs.com (mail143.messagelabs.com [216.82.254.35])
	by kanga.kvack.org (Postfix) with SMTP id 082C86B004F
	for <linux-mm@kvack.org>; Mon, 17 Aug 2009 15:47:33 -0400 (EDT)
From: "Dike, Jeffrey G" <jeffrey.g.dike@intel.com>
Date: Mon, 17 Aug 2009 12:47:29 -0700
Subject: RE: [RFC] respect the referenced bit of KVM guest pages?
Message-ID: <9EECC02A4CC333418C00A85D21E89326B6611F25@azsmsx502.amr.corp.intel.com>
References: <20090805155805.GC23385@random.random>
 <20090806100824.GO23385@random.random> <4A7AAE07.1010202@redhat.com>
 <20090806102057.GQ23385@random.random> <20090806105932.GA1569@localhost>
 <4A7AC201.4010202@redhat.com> <20090806130631.GB6162@localhost>
 <4A7AD79E.4020604@redhat.com> <20090816032822.GB6888@localhost>
 <4A878377.70502@redhat.com> <20090816045522.GA13740@localhost>
In-Reply-To: <20090816045522.GA13740@localhost>
Content-Language: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
Sender: owner-linux-mm@kvack.org
To: "Wu, Fengguang" <fengguang.wu@intel.com>, Rik van Riel <riel@redhat.com>
Cc: Avi Kivity <avi@redhat.com>, Andrea Arcangeli <aarcange@redhat.com>, "Yu,
 Wilfred" <wilfred.yu@intel.com>, "Kleen, Andi" <andi.kleen@intel.com>, Hugh Dickins <hugh.dickins@tiscali.co.uk>, Andrew Morton <akpm@linux-foundation.org>, Christoph Lameter <cl@linux-foundation.org>, KOSAKI Motohiro <kosaki.motohiro@jp.fujitsu.com>, Mel Gorman <mel@csn.ul.ie>, LKML <linux-kernel@vger.kernel.org>, linux-mm <linux-mm@kvack.org>
List-ID: <linux-mm.kvack.org>

> Jeff, can you have a look at these stats? Thanks!

Yeah, I just did after adding some tracing which dumped out the same data. =
 It looks pretty much the same.  Inactive anon and active anon are pretty s=
imilar.  Inactive file and active file are smaller and fluctuate more, but =
doesn't look horribly unbalanced.

Below are the stats from memory.stat - inactive_anon, active_anon, inactive=
_file, active_file, plus some commentary on what's happening.

					Jeff




114688 0 1978368 630784
114688 0 1978368 630784
114688 0 1978368 630784
114688 0 1978368 630784
114688 0 1978368 630784
114688 0 1978368 630784
114688 0 1978368 630784

# Fire up instance

20480 4403200 2699264 647168
20480 4411392 2740224 647168
20480 4411392 2740224 647168
20480 11436032 3289088 651264
20480 11587584 3313664 651264
20480 12558336 3313664 651264
20480 12558336 3313664 651264
20480 12558336 3313664 651264
20480 12558336 3313664 651264
20480 12558336 3313664 651264
20480 12558336 3313664 651264
20480 12558336 3313664 651264
20480 12558336 3313664 651264
20480 25387008 4263936 872448
20480 25387008 4263936 872448
20480 25387008 4198400 937984
20480 25387008 4198400 937984
20480 25387008 4198400 937984
20480 25387008 4198400 937984
20480 25387008 4198400 937984
20480 25387008 4198400 937984
20480 25387008 4198400 937984
20480 25387008 4198400 937984
20480 25411584 4198400 937984
20480 25411584 4198400 937984
20480 40665088 7573504 946176
20480 43606016 7573504 946176
20480 45346816 7581696 946176
20480 45752320 7581696 946176
20480 46575616 7581696 946176
20480 46682112 7581696 946176
20480 48975872 9920512 1073152
20480 64536576 38457344 1826816

# Booted, X is starting
# Run a browser and editor, then shut them down and halt the instance

10964992 72454144 47714304 3067904
16797696 71151616 42893312 3244032
16797696 73035776 41037824 3272704
16797696 73547776 40525824 3272704
16797696 73609216 40402944 3276800
16797696 73719808 40337408 3289088
16797696 73920512 40079360 3289088
16797696 78016512 36036608 3297280
16797696 78016512 36036608 3297280
16797696 80203776 33755136 3387392
16797696 86904832 26972160 3526656
16797696 93523968 19927040 3837952
29011968 90546176 10276864 4308992
45670400 83685376 991232 3854336
66400256 66416640 368640 933888
66715648 66654208 376832 471040
64811008 64802816 3416064 1114112
65236992 65085440 2535424 1228800
65212416 65011712 2519040 1343488
64626688 64610304 3534848 1429504
63807488 63758336 4829184 1695744
63975424 63946752 4419584 1744896
63975424 63946752 4419584 1744896
63975424 63946752 4419584 1744896
63975424 63946752 4423680 1744896
63975424 63946752 4423680 1744896
63975424 63946752 4423680 1744896
64045056 63946752 4440064 1757184
64069632 63946752 4440064 1757184
64077824 63946752 4403200 1757184
64077824 63946752 4403200 1757184
64077824 63946752 4403200 1757184
64147456 64016384 4222976 1757184
64638976 64733184 2801664 1900544
65208320 65605632 1310720 1892352
64946176 65863680 1335296 1998848
62701568 68599808 843776 1945600
66068480 66023424 778240 978944
65568768 65511424 2093056 1044480
66183168 66056192 966656 1011712
66478080 66555904 241664 864256
66912256 66899968 135168 270336
66646016 66539520 577536 262144
66134016 66179072 1421312 319488
66125824 66183168 1273856 380928
66330624 66445312 933888 475136
65970176 65966080 1581056 548864
66158592 66158592 1175552 708608
65781760 66084864 1503232 806912
66084864 66048000 1118208 843776
66420736 66449408 376832 851968
66351104 66138112 757760 864256
66285568 66138112 921600 868352
65945600 65847296 1495040 888832
66002944 65839104 1363968 888832
66002944 65839104 1363968 888832
66039808 65839104 1363968 888832
66043904 65839104 1363968 888832
66043904 65839104 1372160 888832
65523712 65490944 2224128 929792
66031616 66297856 827392 946176
64913408 68141056 188416 933888
64770048 68325376 73728 917504
65216512 67932160 81920 909312
65470464 67678208 81920 909312
65036288 67973120 356352 790528
63492096 69877760 110592 647168
63111168 70508544 73728 413696
66895872 66883584 16384 348160
66650112 67203072 20480 344064
66830336 67002368 28672 335872
66785280 67002368 32768 331776
67084288 66736128 45056 331776
67104768 66736128 45056 331776
66916352 66801664 45056 331776
66883584 66863104 45056 331776
66883584 66863104 45056 331776
66891776 66863104 45056 331776
66899968 66863104 45056 331776
66904064 66863104 45056 331776
66904064 66863104 45056 331776
66904064 66863104 45056 331776
66715648 66641920 385024 339968
66617344 66629632 237568 364544
66633728 66629632 237568 364544
66641920 66629632 237568 364544
66641920 66629632 237568 364544
66662400 66461696 589824 389120
66588672 66527232 659456 389120
66252800 66252800 1105920 413696
66277376 66297856 983040 413696
66498560 66285568 884736 413696
66129920 66183168 1163264 442368
66138112 66183168 1163264 442368
66256896 66465792 921600 442368
66560000 66465792 606208 442368
66662400 66445312 589824 446464
66560000 66490368 708608 446464
66629632 66441216 577536 446464
66711552 66441216 520192 462848
66617344 66531328 577536 466944
66412544 66605056 606208 466944
66605056 66637824 475136 471040
66297856 67018752 344064 483328
65863680 67588096 212992 483328
66334720 67129344 159744 516096
65204224 68337664 159744 516096
61399040 72212480 98304 499712
62427136 71114752 98304 499712
62775296 70680576 155648 503808
62595072 70209536 823296 565248
66490368 66576384 458752 577536
66818048 66625536 196608 577536
66699264 66793472 135168 507904
66707456 66736128 151552 512000
66314240 67293184 53248 483328
56832000 76705792 180224 495616
59273216 73998336 368640 499712
59351040 73928704 368640 499712
59400192 73928704 368640 499712
59678720 73478144 241664 495616
59875328 73531392 241664 495616
60690432 72830976 110592 503808
61919232 71634944 110592 503808
65523712 68096000 49152 483328
66748416 66801664 102400 487424
65994752 67555328 114688 487424
65994752 67555328 114688 487424
65994752 67555328 114688 487424
66285568 66195456 1093632 520192
66232320 65978368 1335296 557056
66232320 65978368 1335296 557056
66232320 65978368 1335296 557056
66232320 65978368 1335296 557056
66060288 65994752 1548288 557056

# Instance halted

118784 0 1953792 569344
118784 0 1953792 569344
118784 0 1953792 569344
118784 0 1953792 569344
118784 0 1953792 569344
118784 0 1953792 569344
118784 0 1953792 569344
118784 0 1953792 569344

--
To unsubscribe, send a message with 'unsubscribe linux-mm' in
the body to majordomo@kvack.org.  For more info on Linux MM,
see: http://www.linux-mm.org/ .
Don't email: <a href=mailto:"dont@kvack.org"> email@kvack.org </a>
